<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

    <title>Document</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            background: url(l5.png) no-repeat center center;
            background-size: contain;
            background-color: white;
            background-repeat: no-repeat;
            background-position: 10% center;
        }

        .bubble {
            position: relative;
            z-index: 2;
            position: absolute;
            width: 300px;
            height: 300px;
            background: #348cd9;
            border-radius: 50% 30%;
            opacity: 0.4;
            /* z-index: 0; */
        }

        .bubble1 {
            position: relative;
            z-index: 2;
            position: absolute;
            width: 300px;
            height: 300px;
            background: #b3dbfe;
            border-radius: 50% 30%;
            opacity: 0.4;
            /* z-index: 0; */
        }

        .bubble2 {
            position: relative;
            z-index: 2;
            position: absolute;
            width: 300px;
            height: 300px;
            background: #dfb157;
            border-radius: 50% 30%;
            opacity: 0.4;
            /* z-index: 0; */
        }

        .top-left {
            top: -230px;
            left: -40px;
        }

        .top-right {
            top: -180px;
            right: -50px;
        }

        .bottom-left {
            bottom: -230px;
            left: -150px;
        }

        .bottom-right {
            bottom: -240px;
            right: -40px;
        }

        .box {
            width: 500px;
            /* height: 100px; */
            margin: 30px auto;
            /* background: white; */
            padding: 40px;
            border-radius: 2px;
            margin-right: 70px;
        }

        .box h4 {
            text-align: center;
            font-size: 17px;
            margin-top: -5px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .space {
            letter-spacing: 4px;
        }

        form {
            flex-direction: column;
            margin-top: 20px;
        }

        form p {
            text-align: center;
            font-size: 10px;
            margin-bottom: 10px;
        }

        form label {
            margin-bottom: 5px;
            font-size: 10px;
            font-weight: 600;
            text-align: left;
        }

        form input {
            width: 100%;
            height: 30px;
            font-size: 10px;
            margin-top: 3px;
            margin-bottom: 10px;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            outline: none;
        }

        form input:focus {
            outline: none;
            border: 1px solid #007fc9;
        }

        button {
            margin-top: 25px;
            width: 100%;
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            justify-content: center;
            align-items: center;
            background: linear-gradient(to right, #007fc9, #005e94);
            color: #fff;
            border: none;
            border-radius: 2px;
            padding: 10px;
            cursor: pointer;
        }

        button:hover {
            background: #007fc9;
        }

        #fullname-error,
        #username-error,
        #email-error,
        #password-error {
            color: red;
            font-size: 10px;
            font-weight: 500;
            margin-top: -6px;
            margin-bottom: 5px;
            text-align: left;
        }

        #login-error {
            color: red;
            font-size: 11px;
            font-weight: 900;
            text-align: center;
        }

        /* .line {
            margin-top: 10px;
            text-align: center;
        }

        .line p {
            font-size: 10px;
        }

        .link a {
            color: #007fc9;
            text-decoration: none;
            font-weight: 600;
            font-size: 10px;
        }

        .link a:hover {
            color: #005e94;
            text-decoration: underline;
        } */

        .line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            padding: 0 10px;
        }

        .line .link,
        .line .link1 {
            font-weight: 500;
            color: #333;
        }

        .line a {
            font-weight: 600;
            text-decoration: none;
            color: #007fc9;
        }

        .line a:hover {
            color: #005e94;
            text-decoration: underline;
        }


        #toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #99cdfa;
            color: black;
            padding: 8px 20px;
            border-radius: 2px;
            display: none;
            font-size: 11px;
            font-weight: 600;
            /* box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); */
            z-index: 9999;
        }
    </style>
</head>

<body>
    <div class="bubble top-left"></div>
    <div class="bubble2 top-right"></div>
    <div class="bubble1 bottom-left"></div>
    <div class="bubble bottom-right"></div>

    <div class="box">
        <h4 class="space">REGISTER</h4>
        <form id="register-from" class="b1">

            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Laudantium iure doloribus similique dignissimos
                pariatur dolorum corrupti, sapiente earum modi expedita cumque accusamus a est aliquid iste ad, eligendi
                tempora eveniet?</p>

            <p class="error" id="login-error"></p>

            <div class="rf">
                <label for="name">Full Name</label>
                <input type="text" id="fullname" placeholder="full name" required oninput="validateFullname()">
                <p class="error" id="fullname-error"></p>
            </div>

            <div class="rf">
                <label for="username">User Name</label>
                <input type="text" id="username" placeholder="username" required oninput="validateUsername()">
                <p class="error" id="username-error"></p>
            </div>

            <div class="rf">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="email" required oninput="validateEmail()">
                <p class="error" id="email-error"></p>
            </div>

            <div class="rf">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="password" required oninput="validatePassword()">
                <p class="error" id="password-error"></p>
            </div>

            <button class="register" type="button" id="rclick" onclick="registerUser()">REGISTER</button>

            <div class="line">
                <p class="link">Already have an account? <a href="login.html">Login</a></p>
                <p class="link1">back to <a href="alllogin.html">Home</a></p>
            </div>

            <div id="toast"></div>
        </form>
    </div>

    <script>
        function showToast(message) {
            const toast = document.getElementById("toast");
            toast.textContent = message;
            toast.style.display = "block";
            setTimeout(() => {
                toast.style.display = "none";
            }, 2000);
        }

        function validateFullname() {
            const nameInput = document.getElementById("fullname");
            const name = nameInput.value.trim();
            const errorBox = document.getElementById("fullname-error");

            if (name.length < 4) {
                errorBox.textContent = "Full name must be at least 4 characters long";
                errorBox.style.color = "red";
                nameInput.style.border = "1px solid red";
                errorBox.style.fontSize = "10px";
                return false;
            }

            if (/^[0-9]/.test(name)) {
                errorBox.textContent = "Full name cannot start with a number.";
                nameInput.style.border = "1px solid red";
                return false;
            }

            errorBox.textContent = "";
            nameInput.style.border = "1px solid #00695c";
            return true;
        }



        function validateUsername() {
            const username1 = document.getElementById("username");
            const username = username1.value.trim();
            const errorBox = document.getElementById("username-error");

            if (username.length < 3) {
                errorBox.innerHTML = "Username must be at least 3 characters long";
                errorBox.style.color = "red";
                username1.style.border = "1px solid red";
                errorBox.style.fontSize = "10px";
                return false;
            } else {
                username1.style.border = "1px solid #007fc9";
                errorBox.innerHTML = "";
                return true;
            }
        }

        function validateEmail() {
            const emaile = document.getElementById("email");
            const email = emaile.value.trim();
            const errorBox = document.getElementById("email-error");

            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (!regex.test(email)) {
                errorBox.textContent = "Invalid email format";
                errorBox.style.color = "red";
                emaile.style.border = "1px solid red";
                errorBox.style.fontSize = "10px";
                return false;
            } else {
                emaile.style.border = "1px solid #007fc9";
                errorBox.innerHTML = "";
                return true;
            }
        }

        function validatePassword() {
            const password1 = document.getElementById("password");
            const password = password1.value.trim();
            const errorBox = document.getElementById("password-error");

            if (password.length < 6) {
                errorBox.innerHTML = "Password must be at least 6 characters long";
                errorBox.style.color = "red";
                password1.style.border = "1px solid red";
                errorBox.style.fontSize = "10px";
                return false;
            } else {
                password1.style.border = "1px solid #007fc9";
                errorBox.innerHTML = "";
                return true;
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            document.addEventListener("keydown", function (event) {
                if (event.key === "Enter") {
                    registerUser();
                }
            });
        });

        function registerUser() {
            const fullname = document.getElementById("fullname").value.trim();
            const username = document.getElementById("username").value.trim();
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value.trim();

            const isValid =
                validateFullname() && validateUsername() && validateEmail() && validatePassword();

            if (!isValid) return;

            const users = JSON.parse(localStorage.getItem("users")) || [];

            const now = new Date();
            const dd = String(now.getDate()).padStart(2, '0');
            const mm = String(now.getMonth() + 1).padStart(2, '0');
            const yy = String(now.getFullYear()).slice(2);
            const formattedDate = `${dd}-${mm}-${yy}`;
            const formattedTime = now.toLocaleTimeString();

            const role = "user";

            const newUser = {
                fullname,
                username,
                email,
                role,
                password,
                loginDate: formattedDate,
                loginTime: formattedTime
            };

            users.push(newUser);
            localStorage.setItem("users", JSON.stringify(users));

            showToast("Registration successful! Redirecting to login...");

            setTimeout(() => {
                window.location.href = "login.html";
            }, 600);
        }
    </script>
</body>

</html>